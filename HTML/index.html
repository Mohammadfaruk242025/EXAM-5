<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Assignment-5</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f0f4f9;
      }
      .max-w-1920 {
        max-width: 1920px;
      }
      .card-icon {
        width: 40px;
        height: 40px;
        object-fit: contain;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen">
    <!-- Main Container -->
    <div class="max-w-1920 mx-auto p-4 md:p-8">
      <!-- Header -->
      <header
        class="flex flex-col sm:flex-row items-center justify-between p-4 bg-white rounded-lg shadow-md mb-8 space-y-4 sm:space-y-0"
      >
        <div class="flex items-center space-x-2">
          <img
            src="../assets/logo.png"
            alt="Bangladesh Government Logo"
            class="h-10 w-10"
          />
          <h1 class="text-xl font-bold text-green-800">Emergency Service</h1>
        </div>
        <div class="flex items-center space-x-4">
          <div class="flex items-center space-x-1">
            <img
              id="favoritesIcon"
              src="../assets/heart.png"
              alt="Favorites Icon"
              class="h-6 w-6"
            />
            <span id="favoritesCount" class="text-gray-600">0</span>
          </div>
          <div class="flex items-center space-x-1">
            <img src="../assets/coin.png" alt="Coins Icon" class="h-6 w-6" />
            <span id="coinsCount" class="text-gray-600">100</span>
          </div>
          <button
            id="copyBtn"
            class="flex items-center space-x-1 bg-gray-200 text-gray-700 py-1 px-3 rounded-full hover:bg-gray-300 transition-colors"
          >
            <span>Copy</span>
          </button>
        </div>
      </header>
      <!-- Directory Header -->
      <div
        class="text-center mb-8 p-6 bg-[#006A4E] rounded-lg text-white shadow-md"
      >
        <img
          src="../assets/logo-dark.png"
          alt="Bangladesh Government Logo"
          class="h-20 w-20 mx-auto mb-4"
        />
        <h2 class="text-2xl md:text-3xl font-bold mb-1">জাতীয় জরুরি সেবা</h2>
        <p class="text-sm md:text-base">
          Government Emergency Services at Your Fingertip – A Project by
          Government of the People’s Republic of Bangladesh
        </p>
      </div>
      <!-- Main Content Grid -->
      <div class="flex flex-col lg:flex-row gap-8">
        <!-- Service Cards Section -->
        <div class="lg:w-2/3">
          <!-- Services Grid -->
          <div
            id="service-cards-container"
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"
          >
            <div
              class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center text-center transition-transform transform hover:scale-105"
              data-service-id="national-emergency-999"
            >
              <div class="flex items-center w-full justify-between mb-4">
                <img
                  src="../assets/emergency.png"
                  alt="Emergency Icon"
                  class="card-icon"
                />
                <i
                  class="far fa-heart text-red-500 text-xl cursor-pointer"
                  onclick="toggleFavorite(this)"
                ></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-800">
                জাতীয় জরুরি সেবা
              </h3>
              <p class="text-sm text-gray-500 mb-2">সার্বক্ষনিক</p>
              <p class="text-3xl font-bold text-green-600">999</p>
              <div class="flex justify-center space-x-4 mt-4 w-full">
                <button
                  onclick="copyToClipboard('999')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full border border-gray-300 text-gray-600 text-sm hover:bg-gray-100 transition-colors"
                >
                  <span>Copy</span>
                </button>
                <button
                  onclick="handleCall('জাতীয় জরুরি সেবা', '999')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full bg-green-500 text-white text-sm hover:bg-green-600 transition-colors"
                >
                  <span>Call</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
              class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center text-center transition-transform transform hover:scale-105"
              data-service-id="electricity-helpline-16216"
            >
              <div class="flex items-center w-full justify-between mb-4">
                <i class="fas fa-bolt text-4xl text-yellow-400"></i>
                <i
                  class="far fa-heart text-red-500 text-xl cursor-pointer"
                  onclick="toggleFavorite(this)"
                ></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-800">
                বিদ্যুৎ বিভ্রাট
              </h3>
              <p class="text-sm text-gray-500 mb-2">Electricity Outage</p>
              <p class="text-3xl font-bold text-green-600">16216</p>
              <div class="flex justify-center space-x-4 mt-4 w-full">
                <button
                  onclick="copyToClipboard('16216')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full border border-gray-300 text-gray-600 text-sm hover:bg-gray-100 transition-colors"
                >
                  <span>Copy</span>
                </button>
                <button
                  onclick="handleCall('বিদ্যুৎ বিভ্রাট', '16216')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full bg-green-500 text-white text-sm hover:bg-green-600 transition-colors"
                >
                  <span>Call</span>
                </button>
              </div>
            </div>

            <div
              class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center text-center transition-transform transform hover:scale-105"
              data-service-id="brac-helpline-16445"
            >
              <div class="flex items-center w-full justify-between mb-4">
                <img
                  src="../assets/brac.png"
                  alt="Brac Icon"
                  class="card-icon"
                />
                <i
                  class="far fa-heart text-red-500 text-xl cursor-pointer"
                  onclick="toggleFavorite(this)"
                ></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-800">ব্র্যাক</h3>
              <p class="text-sm text-gray-500 mb-2">NGO</p>
              <p class="text-3xl font-bold text-green-600">16445</p>
              <div class="flex justify-center space-x-4 mt-4 w-full">
                <button
                  onclick="copyToClipboard('16445')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full border border-gray-300 text-gray-600 text-sm hover:bg-gray-100 transition-colors"
                >
                  <span>Copy</span>
                </button>
                <button
                  onclick="handleCall('ব্র্যাক', '16445')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full bg-green-500 text-white text-sm hover:bg-green-600 transition-colors"
                >
                  <span>Call</span>
                </button>
              </div>
            </div>

            <div
              class="bg-white p-6 rounded-lg shadow-md flex flex-col items-center text-center transition-transform transform hover:scale-105"
              data-service-id="bd-railway-163"
            >
              <div class="flex items-center w-full justify-between mb-4">
                <img
                  src="../assets/Bangladesh-Railway.png"
                  alt="Bangladesh Railway Icon"
                  class="card-icon"
                />
                <i
                  class="far fa-heart text-red-500 text-xl cursor-pointer"
                  onclick="toggleFavorite(this)"
                ></i>
              </div>
              <h3 class="text-lg font-semibold text-gray-800">
                বাংলাদেশ রেলওয়ে
              </h3>
              <p class="text-sm text-gray-500 mb-2">পরিবেশ</p>
              <p class="text-3xl font-bold text-green-600">163</p>
              <div class="flex justify-center space-x-4 mt-4 w-full">
                <button
                  onclick="copyToClipboard('163')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full border border-gray-300 text-gray-600 text-sm hover:bg-gray-100 transition-colors"
                >
                  <span>Copy</span>
                </button>
                <button
                  onclick="handleCall('বাংলাদেশ রেলওয়ে', '163')"
                  class="flex-1 flex items-center justify-center p-2 rounded-full bg-green-500 text-white text-sm hover:bg-green-600 transition-colors"
                >
                  <span>Call</span>
                </button>
              </div>
            </div>
          </div>
        </div>
         <!-- Call History Section -->
        <div class="lg:w-1/3 mt-8 lg:mt-0">
          <div class="bg-white text-black p-6 rounded-lg shadow-md">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-bold">Call History</h3>
              <button
                onclick="clearCallHistory()"
                class="text-sm px-3 py-1 bg-green-500 rounded-full hover:bg-green-600 transition-colors"
              >
                Clear
              </button>
            </div>
            <div id="callHistoryList"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript -->
    <script>
      const historyKey = "emergencyCallHistory";
      const favoritesKey = "emergencyFavorites";
      const coinsKey = "emergencyCoins";
      const callCost = 20;

      document.addEventListener("DOMContentLoaded", () => {
        loadInitialState();
        renderHistory();
        renderFavorites();
      });

      function loadInitialState() {
        let coins = localStorage.getItem(coinsKey);
        if (!coins) {
          coins = 100;
          localStorage.setItem(coinsKey, coins);
        }
        document.getElementById("coinsCount").textContent = coins;
      }

      function updateCoinsDisplay() {
        const coins = localStorage.getItem(coinsKey);
        document.getElementById("coinsCount").textContent = coins;
      }

      function renderFavorites() {
        const favorites = JSON.parse(
          localStorage.getItem(favoritesKey) || "[]"
        );
        document.getElementById("favoritesCount").textContent =
          favorites.length;
        const cards = document.querySelectorAll("[data-service-id]");
        cards.forEach((card) => {
          const serviceId = card.dataset.serviceId;
          const heartContainer = card.querySelector(".fa-heart").parentNode;

          if (favorites.includes(serviceId)) {
            const img = document.createElement("img");
            img.src = "heart.png";
            img.alt = "Filled Heart";
            img.className = "w-6 h-6 cursor-pointer";
            img.onclick = (e) => toggleFavorite(e.target);
            heartContainer.innerHTML = "";
            heartContainer.appendChild(img);
          } else {
            const icon = document.createElement("i");
            icon.className = "far fa-heart text-red-500 text-xl cursor-pointer";
            icon.onclick = (e) => toggleFavorite(e.target);
            heartContainer.innerHTML = "";
            heartContainer.appendChild(icon);
          }
        });
      }

      function toggleFavorite(element) {
        const card = element.closest("[data-service-id]");
        const serviceId = card.dataset.serviceId;
        let favorites = JSON.parse(localStorage.getItem(favoritesKey) || "[]");

        if (favorites.includes(serviceId)) {
          favorites = favorites.filter((id) => id !== serviceId);
        } else {
          favorites.push(serviceId);
        }
        localStorage.setItem(favoritesKey, JSON.stringify(favorites));

        renderFavorites();
      }

      function logCall(serviceTitle, number) {
        const history = JSON.parse(localStorage.getItem(historyKey) || "[]");
        history.push({ serviceTitle, number, timestamp: new Date() });
        localStorage.setItem(historyKey, JSON.stringify(history));
        renderHistory();
      }

      function handleCall(serviceTitle, number) {
        let coins = parseInt(localStorage.getItem(COINS_KEY), 10);
        if (coins < callCost) {
          showTemporaryMessage(
            "You don't have enough coins to make this call."
          );
          return;
        }

        coins -= callCost;
        localStorage.setItem(COINS_KEY, coins);
        updateCoinsDisplay();
        logCall(serviceTitle, number);
        showTemporaryMessage(`Calling ${serviceTitle} at ${number}`);
      }

      function clearCallHistory() {
        localStorage.removeItem(historyKey);
        renderHistory();
        showTemporaryMessage("Call history cleared.");
      }

      function copyToClipboard(number) {
        navigator.clipboard
          .writeText(number)
          .then(() => {
            showTemporaryMessage("Number Copied!");
          })
          .catch((err) => {
            console.error("Failed to copy text: ", err);
          });
      }

      function showTemporaryMessage(message) {
        const messageBox = document.createElement("div");
        messageBox.className =
          "fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-md shadow-lg transition-opacity duration-300 opacity-0 z-50";
        messageBox.textContent = message;
        document.body.appendChild(messageBox);
        setTimeout(() => {
          messageBox.style.opacity = "1";
        }, 10);
        setTimeout(() => {
          messageBox.style.opacity = "0";
          setTimeout(() => messageBox.remove(), 300);
        }, 2000);
      }

      function renderHistory() {
        const history = JSON.parse(localStorage.getItem(historyKey) || "[]");
        const historyList = document.getElementById("callHistoryList");
        historyList.innerHTML = "";

        if (history.length === 0) {
          historyList.innerHTML =
            '<p class="text-center text-gray-300 italic">No calls made yet.</p>';
          return;
        }

        history
          .slice(-5)
          .reverse()
          .forEach((item) => {
            const formattedTime = new Date(item.timestamp).toLocaleTimeString();
            const historyItem = document.createElement("div");
            historyItem.className =
              "bg-grey-800 p-3 rounded-md mb-2 flex justify-between items-center";
            historyItem.innerHTML = `
                    <div>
                        <p class="font-semibold text-sm">${item.serviceTitle}</p>
                        <p class="text-xs text-green-200">${item.number}</p>
                    </div>
                    <span class="text-sm font-bold">${formattedTime}</span>
                `;
            historyList.appendChild(historyItem);
          });
      }
    </script>
  </body>
</html>


<!-- Question And Answer -->
1) `getElementById` gets a single element by its **unique ID**.
`getElementsByClassName` returns a **collection of elements** with a specific
class name. `querySelector` returns the **first element** that matches a CSS
selector, while `querySelectorAll** returns **all elements** that match the
selector.
 2) You create an element using `document.createElement('tagName')`.
You can then insert it into the DOM using methods like
`parentNode.appendChild(childNode)` to add it as the last child, or
`parentNode.insertBefore(newNode, referenceNode)` to place it before a specific
existing node. 
3) Event bubbling == is a process where an event on a DOM element
first triggers on the element itself and then "bubbles up" to its parent
elements, then their parents, and so on, up to the root of the document. This
means a click on a button inside a div will also trigger a click event on the
div and the body.
 4) Event delegation == is a technique where you add a single
event listener to a parent element instead of adding multiple listeners to each
of its child elements. It's useful because it improves performance by reducing
the number of event listeners, especially for dynamic content where new elements
are added or removed.
 5) `preventDefault()` stops the default action of an
event, such as a form submission or a link's navigation. `stopPropagation()`
prevents the event from propagating further up the DOM tree, stopping the
**event bubbling** process.

